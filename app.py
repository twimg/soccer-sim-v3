import streamlit as st
import pandas as pd
import random

# ã‚¿ã‚¤ãƒˆãƒ«
st.set_page_config(page_title="ã‚µãƒƒã‚«ãƒ¼ã‚¯ãƒ©ãƒ–é‹å–¶ v3", layout="wide")
st.title("âš½ ã‚µãƒƒã‚«ãƒ¼ã‚¯ãƒ©ãƒ–é‹å–¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ v3")

# ãƒãƒ¼ãƒ åˆæœŸãƒ‡ãƒ¼ã‚¿
players = [
    {"åå‰": "æœ¨æ‘ éš¼äºº", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "DF", "å¹´é½¢": 27, "å›½ç±": "æ—¥æœ¬", "èƒ½åŠ›": 66, "å¹´ä¿¸": 1200},
    {"åå‰": "ç™½çŸ³ ç¿¼", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "MF", "å¹´é½¢": 23, "å›½ç±": "æ—¥æœ¬", "èƒ½åŠ›": 70, "å¹´ä¿¸": 1800},
    {"åå‰": "ã‚¢ãƒ³ãƒˆãƒ³ãƒ»ãƒšãƒ¬ã‚¹", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "FW", "å¹´é½¢": 25, "å›½ç±": "ã‚¹ãƒšã‚¤ãƒ³", "èƒ½åŠ›": 74, "å¹´ä¿¸": 3000},
    {"åå‰": "ãƒãƒ£ãƒ³ãƒ»ã‚®ãƒ¥ã‚½ãƒ³", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "MF", "å¹´é½¢": 22, "å›½ç±": "éŸ“å›½", "èƒ½åŠ›": 68, "å¹´ä¿¸": 1000},
    {"åå‰": "ãƒ­ãƒ‰ãƒªã‚´ãƒ»ã‚»ã‚¦ãƒ", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "DF", "å¹´é½¢": 29, "å›½ç±": "ãƒ–ãƒ©ã‚¸ãƒ«", "èƒ½åŠ›": 72, "å¹´ä¿¸": 2500},
    {"åå‰": "ä½è—¤ ä¸€æ¨¹", "ãƒã‚¸ã‚·ãƒ§ãƒ³": "GK", "å¹´é½¢": 24, "å›½ç±": "æ—¥æœ¬", "èƒ½åŠ›": 65, "å¹´ä¿¸": 1500},
]

df = pd.DataFrame(players)

# ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼šæˆ¦è¡“é¸æŠ
st.sidebar.header("ğŸ“‹ æˆ¦è¡“é¸æŠ")
tactic = st.sidebar.selectbox("æˆ¦è¡“ã‚¿ã‚¤ãƒ—ã‚’é¸ã‚“ã§ãã ã•ã„", ["æ”»æ’ƒçš„", "ãƒãƒ©ãƒ³ã‚¹", "å®ˆå‚™çš„"])

# æˆ¦è¡“è£œæ­£
tactic_bonus = {"æ”»æ’ƒçš„": 5, "ãƒãƒ©ãƒ³ã‚¹": 3, "å®ˆå‚™çš„": 1}

# æˆ¦åŠ›è¨ˆç®—
team_power = df["èƒ½åŠ›"].mean() + tactic_bonus[tactic]

# å¹´ä¿¸è¡¨ç¤º
total_salary = df["å¹´ä¿¸"].sum()

# ãƒ¡ã‚¤ãƒ³è¡¨ç¤º
st.subheader("ğŸ“Š é¸æ‰‹ä¸€è¦§")
st.dataframe(df, use_container_width=True)

st.markdown("---")

# è©¦åˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
st.subheader("ğŸ†š è©¦åˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³")

if st.button("è©¦åˆé–‹å§‹ï¼"):
    opponent_power = random.randint(60, 80)
    result = "å¼•ãåˆ†ã‘"
    score = "1 - 1"

    if team_power > opponent_power + 3:
        result = "å‹åˆ©ï¼"
        score = "2 - 0"
    elif team_power < opponent_power - 3:
        result = "æ•—åŒ—..."
        score = "0 - 2"

    st.write(f"æˆ¦è¡“: **{tactic}**ï¼ˆè£œæ­£ +{tactic_bonus[tactic]}ï¼‰")
    st.write(f"è‡ªãƒãƒ¼ãƒ æˆ¦åŠ›: **{round(team_power,1)}**")
    st.write(f"ç›¸æ‰‹æˆ¦åŠ›: **{opponent_power}**")
    st.success(f"è©¦åˆçµæœï¼š**{result}**ã€€ã‚¹ã‚³ã‚¢ï¼š**{score}**")

st.markdown("---")
st.info(f"ğŸ’° ç·å¹´ä¿¸: {total_salary} ä¸‡å††")
